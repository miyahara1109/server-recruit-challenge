# サーバーエンジニア向け 2025新卒採用事前課題

## 課題5
歌手とそのアルバムを管理するという点で、現状のAPIの改善点を検討し思いつく限り書き出してください。

実装をする必要はありません。

### データの保存
- 問題点
  1. 現状はmain関数から実行された結果を保持しているだけで再起動するとデータが消える
  1. 初期値はrepositoryの初期化タイミングで行われておりプログラム上にハードコーディングされている
  1. DETELEやADDなどデータを直接書き換える際に誤って実行した場合に元に戻せない
- 改善案
  - 外部ファイルに管理状況を保存
    - サーバを再起動した際に以前の管理状況を復元できる
      - 問題点1の解決
    - 初期値の変更やデータのリセットを行う際に外部ファイルを書き換えるだけでプログラムを変更する必要がない
      - 問題点2の解決
    - 別のファイルに変更履歴を記述することで過去のデータへロールバックすることができる
      - 問題点3の解決
  - DBの利用
    - 上記問題の解決
    - SQLの使用によるパフォーマンスの改善
    - 複数のサーバから同一のDBにアクセスすることができるためスケーラビリティの向上

### データのバリデーション
- 問題点
  1. 同一IDの歌手、アルバムを追加した場合に既存のIDに該当するデータが上書き保存される
  1. アルバムを追加した際にSingerIDに対応した歌手が存在するのか保証されない
- 改善案
  - IDをサーバサイドで自動的に割り振る
    - 問題1の解決
    - 同一データを別IDで保存することによる重複を防ぐため内容の重複チェックが別途必要になる可能性あり
    - 他の情報からIDを返すAPIを実装する必要あり
  - IDが重複する場合にエラーを返す
    - 問題1の解決
    - 強制的に上書きするAPIを別に実装することで機能は損なわれない
  - アルバム追加時に存在しないSingerIDの場合エラーを返す
    - 問題2の解決
    - 強制的に追加するAPIを別に実装することで機能は損なわれない

### データの拡張
- 問題点
  1. データがID、歌手名、アルバム名で最小限しかない
- 改善案
  - 保存するデータの追加
    - e.g. グループ名、作詞、作曲、収録曲、リリース日
  - 保存形式の変更
    - 歌手名を配列で保持することで複数人の歌手に対応

### APIの出力
- 問題点
  1. 歌手やアルバムのリストを返す際に順番がランダムになる
- 改善案
  - リストを取得する際にID順で取得する様に処理を変更する
    - mapからIDのみを配列で抽出して数値順にソートする
    - ソートしたIDの配列の各要素をキーとして順番にmapの値を呼び出すことで順番が保証される

### APIの拡張
- 問題点
  1. 特定の歌手、アルバムを取得するにはIDを事前に把握する必要がある
- 改善案
  - 他の情報からIDを取得するAPIの実装
    - e.g. アルバム名もしくは歌手名から対応したIDを返す
  - 他の情報から検索を行うAPIの実装
    - e.g. 歌手名から対応したアルバムのリストを返す
